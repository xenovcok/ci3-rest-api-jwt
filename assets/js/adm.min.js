function resendNft(o,a){$("#modalConfirmation").css("z-index","1066"),$("#modalConfirmation").modal({backdrop:"static",keyboard:!1}),$("#modalConfirmation").modal("show"),$("#btn-modal-ok").click(d=>{$("#modalConfirmation").modal("hide"),setTimeout(function(o){$("#modalLoading").css("z-index","1067"),$("#modalConfirmation").modal({backdrop:"static",keyboard:!1}),$("#modalLoading").modal("show")},2e3),$.ajax({url:"/api/transferNftWithToken",method:"POST",data:{invoice:a,token_id:o},success:function(o){setTimeout(function(o){$("#modalLoading").modal({backdrop:"static",keyboard:!1}),$("#modalLoading").modal("hide")},3e3),console.log(o)},error:function(o){console.log(o)}})})}function getTransaction(o){$.ajax({url:"/api/get-transaction/"+o,method:"GET",dataType:"json",success:function(o){var a,d=o.data,t="";$("#mdl-transaction__invoice").html(d.transaction.code),$("#mdl-transaction__email").html(d.transaction.email),$("#mdl-transaction__name").html(d.transaction.name);var i=o.data.transaction.description?.slice(1,-1),e=0;o.data.nfts.forEach(o=>{a=i?.split(",")[e].split(": ")[1],token_id=i?.split(",")[e].split(": ")[0],t="success"===a?t+'<div class="row px-4 mt-3"><div class="col-lg-6 col-md-6">'+o.name+'</div><div class="col-lg-2 col-md-2"><span class="text-success">'+i.split(",")[e].split(": ")[1]+'</span></div><div class="col-lg-4 col-md-4 text-end">-</div></div>':t+'<div class="row px-4 mt-3"><div class="col-lg-6 col-md-6">'+o.name+'</div><div class="col-lg-2 col-md-2"><span class="text-danger">'+i.split(",")[e].split(": ")[1]+'</span></div><div class="col-lg-4 col-md-4 text-end"><a href="#!" onclick="resendNft('+token_id.trim()+",'"+d.transaction.code+'\')" class="btn btn-primary">resend</a></div></div>',e++}),$("#mdl-detail-container").html(t),console.log(o.data)},error:function(o){console.log("error",o)}}),$("#modalDetails").modal({backdrop:"static",keyboard:!1}),$("#modalDetails").modal("show")}function editDiscount(o){$("#modalEditDiscount").modal("show");var a=$(o).data("discount_id");$.ajax({url:"/api/getDiscountById/"+a,method:"GET",dataType:"json",success:async function(o){var d=o.data;$("#modalEditDiscount input#name").val(d.name),$("#modalEditDiscount input#code").val(d.code),$("#modalEditDiscount select#discount_type option[value="+d.discount_type+"]").attr("selected","selected"),$("#modalEditDiscount input#expired").val(d.expired),$("#modalEditDiscount input#amount").val(d.amount),$("#modalEditDiscount input#discountId").val(a)},error:function(o){console.log("error",o)}})}function deleteDiscount(o){$("#modalConfirmation").modal({backdrop:"static",keyboard:!1}),$("#modalConfirmation").modal("show"),$("#btn-modal-ok").click(a=>{window.location.replace("/admin/coupons/master/delete/"+$(o).data("id"))})}function editUserCoupon(o){$("#modalEditUserCoupon").modal("show");var a=$(o).data("discount_id");$.ajax({url:"/api/getUserCouponById/"+a,method:"GET",dataType:"json",success:async function(o){var d=o.data;console.log(o),$("#modalEditUserCoupon select#discount option:selected").removeAttr("selected"),$("#modalEditUserCoupon input#user").val(d.user_id),$("#modalEditUserCoupon input#code").val(d.coupon_code),$("#modalEditUserCoupon select#discount option[value="+d.discount_id+"]").attr("selected","selected"),$("#modalEditUserCoupon input#expired").val(d.expired),$("#modalEditUserCoupon input#amount").val(d.nft_amount),$("#modalEditUserCoupon input#coupon_id").val(a)},error:function(o){console.log("error",o)}})}function deleteUserCoupon(o){$("#modalConfirmation").modal({backdrop:"static",keyboard:!1}),$("#modalConfirmation").modal("show"),$("#btn-modal-ok").click(a=>{window.location.replace("/admin/coupons/user-coupon/delete/"+$(o).data("id"))})}function editMailingGroup(o){$("#modalEditMailingGroup").modal("show");var a=$(o).data("group_id");console.log(a),$.ajax({url:"/api/getMailingGroupById/"+a,method:"GET",dataType:"json",success:async function(o){var d=o.data;console.log(d),$("#modalEditMailingGroup input#name").val(d.name),$("#modalEditMailingGroup input#slug").val(d.slug),$("#modalEditMailingGroup input#groupId").val(a)},error:function(o){console.log("error",o)}})}function viewMailingGroup(o){$("#modalViewMailingGroup").modal("show");var a=$(o).data("group_id");$.ajax({url:"/api/getMailingGroupMemberByGroupIdApi/"+a,method:"GET",dataType:"json",success:async function(o){var a;o.data.length>0?((a=$("#mailing-group-view-table").dataTable({retrieve:!0,data:o.data,columnDefs:[{targets:3,data:null,render:function(o,a,d,t){return'<a class="btn btn-danger cau__text-sm" id="btn-delete-group" data-id="'+o.id+'" onclick="deleteMailingGroupMemberById(this)">remove</a>'}}],columns:[{data:"id"},{data:"name"},{data:"email"},]})).fnClearTable(),a.fnAddData(o.data)):(a=$("#mailing-group-view-table").dataTable()).fnClearTable()},error:function(o){console.log("error",o)}})}function deleteMailingGroup(o){$("#modalConfirmation").modal({backdrop:"static",keyboard:!1}),$("#modalConfirmation").modal("show"),$("#btn-modal-ok").click(a=>{window.location.replace("/admin/mailing/group/delete/"+$(o).data("id"))})}function deleteMailingGroupMemberById(o){var a=$(o).data("id");console.log(a),$.ajax({url:"/api/deleteMailingGroupMemberById/"+a,method:"GET",dataType:"json",success:async function(o){console.log(o),window.location.replace("/admin/mailing/group")},error:function(o){console.log("error",o)}})}function sendMail(o){var a=$(o),d=a.data("name"),t=a.data("email"),i=a.data("code");$("#modalLoading").modal({backdrop:"static",keyboard:!1}),$("#modalLoading").modal("show"),$.ajax({url:"/admin/mailing/coupon/sendApi/?email="+t+"&name="+d+"&coupon_code="+i,method:"GET",success(o){$("#modalLoading").modal("hide"),o&&setTimeout(alert("email sent"),1e3)},error(o){$("#modalLoading").modal("hide"),alert("error",o)}})}function sendAll(o){$("#modalLoading").modal({backdrop:"static",keyboard:!1}),$("#modalLoading").modal("show"),$.ajax({url:"/admin/mailing/coupon/sendAll",method:"GET",success(o){o&&(console.log("sendAll response",o),$("#modalLoading").modal("hide"),$("#modalMailReport #modalMailContent").html(o),$("#modalMailReport").modal({backdrop:"static",keyboard:!1}),$("#modalMailReport").modal("show"))},error(o){$("#modalMailReport").modal("hide"),alert(o),console.log(o)}})}function sendToGroup(o){$("#modalLoading").modal({backdrop:"static",keyboard:!1}),$("#modalLoading").modal("show");var a=$("#form-send-group select#group").val();console.log("group_id",a),a?$.ajax({url:"/admin/mailing/coupon/sendToGroup/"+a,method:"GET",success(o){o&&(console.log("sendToGroup response",o),setInterval(()=>{$("#modalLoading").modal("hide"),$("#modalMailReport #modalMailContent").html(o),$("#modalMailReport").modal({backdrop:"static",keyboard:!1}),$("#modalMailReport").modal("show")},2e3))},error(o){$("#modalMailReport").modal("hide"),alert(o),console.log(o)}}):(setInterval(()=>$("#modalLoading").modal("hide"),2e3),console.log("choose group"))}function addToGroup(o){$("#modalAddUserToGroup").modal("show");var a=$(o).data("user_coupon_id");$("#modalAddUserToGroup input#user_coupon_id").val(a),console.log(a)}window.addEventListener("DOMContentLoaded",o=>{let a=document.body.querySelector("#sidebarToggle");a&&a.addEventListener("click",o=>{o.preventDefault(),document.body.classList.toggle("sb-sidenav-toggled"),localStorage.setItem("sb|sidebar-toggle",document.body.classList.contains("sb-sidenav-toggled"))})}),$(document).ready(function(){$("#btn-modal-cancel").click(o=>($("#modalConfirmation").modal("hide"),!1)),$("#modalDetails").on("shown.bs.modal",function(){$(document).off("focusin.modal")}),$("#btn-delete-store").click(o=>{$("#modalConfirmation").modal({backdrop:"static",keyboard:!1}),$("#modalConfirmation").modal("show")}),$("#btn-delete-coupon").click(o=>{$("#modalConfirmation").modal({backdrop:"static",keyboard:!1}),$("#modalConfirmation").modal("show")}),$("#modalAddUserCoupon select#user").select2({dropdownParent:$("#modalAddUserCoupon"),ajax:{url:function(o){return"/api/getUserByStr/"+o.term},processResults:function(o){var a=JSON.parse(o),d=[];return a.data.map(function(o){d.push({id:o.id,text:o.name})}),console.log(d),{results:d}}}})});