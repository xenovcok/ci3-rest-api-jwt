/*!
 * Start Bootstrap - SB Admin v7.0.5 (https://startbootstrap.com/template/sb-admin)
 * Copyright 2013-2022 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin/blob/master/LICENSE)
 */ function preview(t){console.log("json data:",$(t).data("item_token_id")),$.ajax({url:"/api/getnftbytokenid/"+$(t).data("item_token_id"),method:"GET",dataType:"json",success:function(t){console.log(t);var e=t.data;$("#modal-nft-img-preview").attr("src",e.url),$("#modal-nft-qty").html(e.qty),$("#modal-nft-name").html(e.name),$("#modal-nft-price").html(new Intl.NumberFormat("en-US",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e.price)),$("#modal-nft-description").html(e.description),$("#modalItemDetail").modal("show")},error:function(t){console.log(t)}})}function discountPreview(t){console.log(t);var e=$(t).find("img").attr("src"),a=$(t).find("button").html(),o=$(t).find("#storeName").html(),n=$(t).find("#storeDescription").val(),d=$(t).find("#storeAddress").val(),l=$(t).find("#location").val();$("#modal-discount-img").attr("src",e),$("#modal-discount-amount").html(a),$("#modal-discount-name").html(o),$("#modal-discount-address").val(d),$("#modal-discount-description").html(n),$("#modal-discount-map").attr("href",l),$("#modalDiscount").modal("show")}function redirect(t){window.location.href=t}function showModalDynamic(t,e){$("#modalDynamicTitle").html(t),$("#modalDynamicDescription").html(e),$("#modalDynamic").modal({backdrop:"static",keyboard:!1}),$("#modalDynamic").modal("show")}function hideDynamicModal(){$("#modalDynamic").modal("hide")}function hideModal(t){console.log(t),$(t).modal("hide")}function enableBtn(){$(".btn-choose-wallet").prop("disabled",!1),$(".btn-choose-wallet").addClass("text-white")}function disableBtn(){$(".btn-choose-wallet").prop("disabled",!0),$(".btn-choose-wallet").removeClass("text-white")}function gotoPage(){return(url="/dokupay?payment_code="+$(".paymentMethod:checked").val()+"&coupon_code="+$("#input-code").val().trim(),$(".paymentMethod:checked").val())?$("#checkAgreement").is(":checked")?void($("#modalPurchaseConfirmation").modal("hide"),"USDT"==$(".paymentMethod:checked").val()?($("#modalLoading").modal({backdrop:"static",keyboard:!1}),$("#modalLoading").modal("show"),sendTransaction("USDT").then(t=>{console.log("usdt res",t),!1===t?($(".modal-changenetwork-text").html("Please change your network to Ethereum Mainnet"),setTimeout(function(){$("#modalChangeNetwork").modal("show")},2500),setTimeout(function(){$("#modalLoading").modal("hide")},2e3)):"denied"===t?($("#modalLoading").modal("hide"),$(".modal-changenetwork-text").html("Transaction Failed. Rejected by User"),$("#modalChangeNetwork").modal("show")):"error"===t?($("#modalLoading").modal("hide"),$(".modal-changenetwork-text").html("Something went wrong"),$("#modalChangeNetwork").modal("show")):$.ajax({url:"/api/insert_transaction",method:"POST",dataType:"json",data:{hash:t.transactionHash,token:"USDT"},success:function(t){$.ajax({url:"/api/transfer/"+t.data.invoice,method:"GET",success:function(e){console.log("success transfer",t),window.location.replace("/transaction_history/details/"+t.data.invoice)},error:function(t){console.log("error transfer",t)}})},error:function(t){console.log("error insert",t)}})})):"KPG"==$(".paymentMethod:checked").val()?($("#modalLoading").modal({backdrop:"static",keyboard:!1}),$("#modalLoading").modal("show"),sendTransaction("KPG").then(t=>{console.log("kpg res",t),!1===t?($(".modal-changenetwork-text").html("Please change your network to Avalance C Chain Mainnet"),setTimeout(function(){$("#modalChangeNetwork").modal("show")},2500),setTimeout(function(){$("#modalLoading").modal("hide")},2e3)):"denied"===t?($("#modalLoading").modal("hide"),$(".modal-changenetwork-text").html("Transaction Failed. Rejected by User"),$("#modalChangeNetwork").modal("show")):"error"===t?($("#modalLoading").modal("hide"),$(".modal-changenetwork-text").html("Something went wrong"),$("#modalChangeNetwork").modal("show")):$.ajax({url:"/api/insert_transaction",method:"POST",dataType:"json",data:{hash:t.transactionHash,token:"KPG",coupon_code:$("#input-code").val().trim()},success:function(t){$.ajax({url:"/api/transfer/"+t.data.invoice,method:"GET",success:function(e){window.location.replace("/transaction_history/details/"+t.data.invoice)},error:function(t){console.log("error transfer",t)}})},error:function(t){console.log("error insert",t)}})})):($("#modalLoading").modal({backdrop:"static",keyboard:!1}),$("#modalLoading").modal("show"),window.location.replace(url))):(alert("Please Agree Our Terms & Condition"),!1):(alert("Please Choose your payment method"),!1)}function minusBtn(t,e){t.stopPropagation();let a=$(e).closest("div").find("input[type=number]");a.val()>0&&(a.val(a.val()-1),0>$(e).closest("div").parent().attr("class").search("quantity")?$(e).parent().parent().parent().parent().find(".nft-list.btn-addcart").data("nft_qty",a.val()):$(e).closest("div").parent().find("button").data("nft_qty",a.val()))}function plusBtn(t,e){t.stopPropagation();let a=$(e).closest("div").find("input[type=number]");var o=parseInt(a.val());a.val(o+1),0>$(e).closest("div").parent().attr("class").search("quantity")?$(e).parent().parent().parent().parent().find(".nft-list.btn-addcart").data("nft_qty",o+1):$(e).closest("div").parent().find("button").data("nft_qty",o+1)}function checkNegative(t){0>$(t).val()&&$(t).val(0)}function loadCart(){$.ajax({url:"/page/show_cart",method:"GET",success:function(t){(data=JSON.parse(t).data).itemCount>0?(data.itemCount>1?$(".btn-cart > span").html(data.itemCount+" Items"):$(".btn-cart > span").html(data.itemCount+" Item"),$(".btn-cart").removeClass("btn-icon-primary"),$(".btn-cart").addClass("btn-primary"),$(".btn-cart").attr("disabled",!1),$(".btn-cart > svg > path").attr("fill","#fff")):(data.itemCount,$(".btn-cart > span").html(data.itemCount+" Item"),$(".btn-cart").addClass("btn-icon-primary"),$(".btn-cart").removeClass("btn-primary"),$(".btn-cart").attr("disabled",!0),$(".btn-cart > svg > path").attr("fill","#CACACA"))}})}function cartClick(){sessionStorage.removeItem("badges")}function nftClick(t){var e;e=t?$(t).data("nft_id"):"CAU01",$("#nft-preview-preloader").removeClass("d-none fade"),$.ajax({url:"/page/get_nft_by_id/"+e,method:"GET",success:function(e){resData=JSON.parse(e).data,$(".nft-item .card").removeClass("selected"),$(t).addClass("selected"),$("html, body").animate({scrollTop:0},"fast"),$("#nft-preview .btn-addcart").data("nft_id",resData[0].id),$("#nft-preview .btn-addcart").data("nft_name",resData[0].name),$("#nft-preview .btn-addcart").data("nft_price",resData[0].price),$("#nft-img-preview").attr("src",resData[0].url),$(".nft-header #nft-name").html(resData[0].name),$(".nft-header #nft-price").html(new Intl.NumberFormat("en-US",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(resData[0].price)),$(".nft-header #nft-qty").html(resData[0].qty),$("p#nft-description").html(resData[0].description),$("#nft-preview-preloader").addClass("fade"),$("#nft-preview-preloader").addClass("d-none")}})}function removeItem(t){var e=$(t).data("nft_id");$.ajax({url:"/page/add_to_cart",method:"POST",data:{nft_id:e,nft_name:"",nft_price:"",nft_quantity:0,sub_total:0},success:function(a){data=JSON.parse(a).data,$(t).parent().parent().parent().remove(),$(".summary-item[data-nft_id="+e+"]").remove(),data.itemCount>0?(data.itemCount>1?$(".btn-cart > span").html(data.itemCount+" Item"):$(".btn-cart > span").html(data.itemCount+" Items"),$(".btn-cart").removeClass("btn-icon-primary"),$(".btn-cart").addClass("btn-primary"),$(".btn-cart").attr("disabled",!1),$(".btn-cart > svg > path").attr("fill","#fff")):(data.itemCount>1?$(".btn-cart > span").html(data.itemCount+" Item"):$(".btn-cart > span").html(data.itemCount+" Items"),$(".btn-cart").addClass("btn-icon-primary"),$(".btn-cart").removeClass("btn-primary"),$(".btn-cart").attr("disabled",!0),$(".btn-cart > svg > path").attr("fill","#CACACA")),window.location.reload()}})}window.addEventListener("DOMContentLoaded",t=>{let e=document.body.querySelector("#sidebarToggle");e&&e.addEventListener("click",t=>{t.preventDefault(),document.body.classList.toggle("sb-sidenav-toggled"),localStorage.setItem("sb|sidebar-toggle",document.body.classList.contains("sb-sidenav-toggled"))})});var uuid,checkUUIDPoll,stopCheck,counter=0,baseUrl="";function getUUID(){baseUrl="https://nftcoklat.baliola.com"==window.location.origin?"https://rust-api.betamax.co/Betamax_connect_request/":"https://rust-api-staging.betamax.co/Betamax_connect_request/",$.ajax({url:baseUrl,method:"POST",dataType:"json",success:function(t){let e={render:"image",eclevel:"L",text:"https://nftcoklat.baliola.com?uuid="+t.data.uuid,size:298};$("#qrcode").empty().qrcode(e),$("#scanQrCodeModal").modal("show"),uuid=t.data.uuid,console.log(uuid)},error:function(t){console.log(t)}}),checkUUIDPoll=window.setInterval(()=>{counter++;var t="";$.ajax({url:"/page/check_connection_uuid/"+uuid,method:"POST",dataType:"json",data:{uuid:uuid},success:function(e){console.log("res",e),"ACCEPTED"==e.message?($("#scanQrCodeModal").modal("hide"),$("#modalChooseWallet").modal("show"),e&&e.data?(sessionStorage.setItem("addresses",JSON.stringify(e.data)),sessionStorage.setItem("isBetamax","true"),e.data.forEach(e=>{t+="<div class='wallet-container'><input onclick='enableBtn()' class='form-check-input' type='radio' name='flexRadioDefault' id='flexRadioDefault1' value='"+e.public_address+"'><div class='wallet-detail'><div class='wallet-name cau__text-base-100'>"+e.wallet_name+"</div><div class='wallet-address cau__text-base-60'>"+e.public_address.substring(0,10)+"..."+e.public_address.substring(24,e.public_address.length)+"</div></div></div>"}),$.ajax({url:"/page/btxConnectionCounter",method:"GET",dataType:"json",success:function(t){console.log(t)},error:function(t){console.log("error",t)}})):t="<h3>no wallet address found</h3>",$(".form-check").append(t),stopCheck()):"INVALID"==e.message&&stopCheck()},error:function(t){console.log("error",t)}}),counter>29&&(stopCheck(),getUUID())},2e3)}function checkUUID(t){return $.ajax({url:"/page/check_connection_uuid/"+t,method:"POST",dataType:"json",data:{uuid:t},success:function(t){},error:function(t){console.log("error",t)}}),!0}stopCheck=()=>{counter=0,window.clearInterval(checkUUIDPoll)},$(document).ready(function(){console.log(window.location.hostname),nftClick(),$(".txt-address").click(t=>{var e=sessionStorage.getItem("addresses"),a="";(console.log("txt address"),e)?(console.log("address found: ",JSON.parse(e)),JSON.parse(e).forEach(t=>{a+="<div class='wallet-container'><input onclick='enableBtn()' class='form-check-input' type='radio' name='flexRadioDefault' id='flexRadioDefault1' value='"+t.public_address+"'><div class='wallet-detail'><div class='wallet-name cau__text-base-100'>"+t.wallet_name+"</div><div class='wallet-address cau__text-base-60'>"+t.public_address.substring(0,10)+"..."+t.public_address.substring(24,t.public_address.length)+"</div></div></div>"}),$(".form-check").empty().append(a),$("#modalChooseWallet").modal("show")):$("#modalWeb3").modal("show")}),$("#btn-connect-wallet-sidenav").click(t=>{var e=sessionStorage.getItem("addresses"),a="";(console.log("txt address"),e)?(console.log("address found: ",JSON.parse(e)),JSON.parse(e).forEach(t=>{a+="<div class='wallet-container'><input onclick='enableBtn()' class='form-check-input' type='radio' name='flexRadioDefault' id='flexRadioDefault1' value='"+t.public_address+"'><div class='wallet-detail'><div class='wallet-name cau__text-base-100'>"+t.wallet_name+"</div><div class='wallet-address cau__text-base-60'>"+t.public_address.substring(0,10)+"..."+t.public_address.substring(24,t.public_address.length)+"</div></div></div>"}),$(".form-check").empty().append(a),$("#modalChooseWallet").modal("show")):$("#modalWeb3").modal("show")}),$("#modalChooseWallet").on("hidden.bs.modal",function(){disableBtn()}),$("#cau__btn-edit-receiver").click(t=>{$("#modalEditReceiverInformation").modal("show")}),$("#cau__btn-receiver-update").click(t=>{t.preventDefault(),$("#form_receiver_information").submit()}),$("#btn-connect-btx").click(t=>{var e=sessionStorage.getItem("addresses"),a="";e?(console.log("address found: ",JSON.parse(e)),JSON.parse(e).forEach(t=>{a+="<div class='wallet-container'><input onclick='enableBtn()' class='form-check-input' type='radio' name='flexRadioDefault' id='flexRadioDefault1' value='"+t.public_address+"'><div class='wallet-detail'><div class='wallet-name cau__text-base-100'>"+t.wallet_name+"</div><div class='wallet-address cau__text-base-60'>"+t.public_address.substring(0,10)+"..."+t.public_address.substring(24,t.public_address.length)+"</div></div></div>"}),$(".form-check").empty().append(a),$("#modalChooseWallet").modal("show")):($("#newConnectModal").modal("show"),$("#modalWeb3").modal("hide"),console.log("address not found"))}),$("#btn-use-current-location").click(t=>{t.preventDefault(),navigator.geolocation?console.log(navigator.geolocation.getCurrentPosition(t=>{$("input#location").val("https://maps.google.com/?q="+t.coords.latitude+","+t.coords.longitude+"&z=16&output=embed")})):alert("Geolocation is not supported by this browser.")}),$(".btn-hide-table > svg").click(t=>{$("#wd-table-container").addClass("hidden-width"),$("#wd-form-container").addClass("pe-5"),$("#wd-description").removeClass("hidden-width d-none"),$(".btn-show-table").removeClass("d-none"),console.log("ke klik")}),$(".btn-show-table > svg").click(t=>{$("#wd-table-container").removeClass("hidden-width"),$("#wd-form-container").removeClass("pe-5"),$("#wd-description").addClass("hidden-width d-none"),$(".btn-show-table").addClass("d-none"),console.log("ke klik")}),$(".btn-resync-wallet").click(t=>{$("#modalChooseWallet").modal("hide"),$.ajax({url:"/home/clear_address",method:"GET",dataType:"json",success:async function(t){onDisconnect()},error:function(t){console.log("error",t)}})}),$("#scanQrCodeModal").modal({backdrop:"static",keyboard:!1});function t(t,e){t.attr("data-bs-original-title","copied").tooltip("show").attr("data-bs-original-title","copy")}function e(t){setTimeout(function(){t.tooltip("hide")},1e3)}sessionStorage.getItem("selectedNft")||$(".nft-item > .col:first-child > .card").addClass("selected"),$("#new-connect-wallet").click(t=>{$("#newConnectModal").modal("hide"),getUUID()}),$(".photo>img").click(t=>{$(".under-header").toggleClass("show-popup"),stopCheck()}),$("#btn-back").click(t=>{$("#scanQrCodeModal").modal("hide"),stopCheck()}),$("#btn-back-home").click(t=>{window.location.href="/home"}),$(".btn-hide-table > svg").click(t=>{$("#wd-table-container").addClass("hidden-width"),$("#wd-form-container").addClass("pe-5"),$("#wd-description").removeClass("hidden-width d-none"),$(".btn-show-table").removeClass("d-none")}),$(".btn-show-table > svg").click(t=>{$("#wd-table-container").removeClass("hidden-width"),$("#wd-form-container").removeClass("pe-5"),$("#wd-description").addClass("hidden-width d-none"),$(".btn-show-table").addClass("d-none")}),[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(t){return new bootstrap.Tooltip(t)}),loadCart(),$(".btn-addcart").click(function(t){t.stopPropagation();var e=$(this).data("nft_id"),a=$(this).data("nft_name"),o=$(this).data("nft_price"),n=$(this).data("nft_qty");console.log("qty: ",n),$.ajax({url:"/page/add_to_cart",method:"POST",data:{nft_id:e,nft_name:a,nft_price:o,nft_quantity:n,sub_total:o*n},success:function(t){(data=JSON.parse(t).data).itemCount>0?(data.itemCount>1?$(".btn-cart > span").html(data.itemCount+" Items"):$(".btn-cart > span").html(data.itemCount+" Item"),$(".btn-cart").removeClass("btn-icon-primary"),$(".btn-cart").addClass("btn-primary"),$(".btn-cart").attr("disabled",!1),$(".btn-cart > svg > path").attr("fill","#fff")):(data.itemCount,$(".btn-cart > span").html(data.itemCount+" Item"),$(".btn-cart").addClass("btn-icon-primary"),$(".btn-cart").removeClass("btn-primary"),$(".btn-cart").attr("disabled",!0),$(".btn-cart > svg > path").attr("fill","#CACACA")),n>0&&(badgesCounter=1,sessionStorage.setItem("badges",badgesCounter),$("#badges").removeClass("d-none"),$("#badges").addClass("d-inline"))}})}),$(".btn-cart").click(t=>{window.location.href=$(".btn-cart").attr("href")}),$("#transaction-history-table").DataTable({responsive:!0}),$("#referral-list-table").DataTable({responsive:!0}),$("#withdraw-revenue").DataTable({responsive:!0});let a=document.getElementById("btn-ref-copy");null!==a&&a.addEventListener("click",function(){navigator.clipboard.writeText(document.getElementById("ref-code").value).then(a=>{t($("#btn-ref-copy"),"copied"),e($("#btn-ref-copy"))},t=>console.log("error copying text"))});let o=document.getElementById("btn-copy");null!==o&&o.addEventListener("click",function(){navigator.clipboard.writeText(document.getElementById("va-number").value).then(a=>{t($("#btn-copy"),"copied"),e($("#btn-copy"))},t=>console.log("error copying text"))});let n=document.getElementById("btn-copy-url");null!==n&&n.addEventListener("click",function(){navigator.clipboard.writeText(document.getElementById("ref-url").value).then(a=>{t($("#btn-copy-url"),"copied"),e($("#btn-copy-url"))},t=>console.log("error copying text"))}),$("#connect-wallet").click(()=>{$(".modal-page1").addClass("d-none"),$(".modal-page2").removeClass("d-none")}),$(".btn-connect-wallet").click(function(t){t.preventDefault();var e,a=new bootstrap.Modal($("#modalLoading"),{backdrop:"static",keyboard:!1}),o=$("#btx_email").val();""==o?e="Email cannot be empty":/^\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b$/i.test(o)?(e="submiting ...",$("#connectModal").modal("hide"),a.show(),setTimeout(()=>{a.hide(),$("#modalChooseWallet").modal("show")},2e3)):e="Invalid email format",console.log("res",e)}),$(".btn-choose-wallet").click(t=>{t.preventDefault();var e={address:$(".form-check-input[name=flexRadioDefault]:checked").val()};console.log("datas",e),$.ajax({url:"/home/select_address",method:"POST",data:e,success:function(t){JSON.parse(t).status}}),$("#modalChooseWallet").modal("hide"),$("#modalSuccess").modal({backdrop:"static",keyboard:!1}),$("#modalSuccess").modal("show")}),$(".btn-success-homepage").click(()=>{window.location.reload()}),$("#btn-logout").click(t=>{sessionStorage.clear()}),$(".btn-choose-cancel").click(t=>{t.preventDefault(),$("#modalChooseWallet").modal("hide")}),$("#btn-ok-noaddress").click(t=>{t.preventDefault(),$("#modalNoAddress").modal("hide")}),$("#btn-process-payment").click(t=>{t.preventDefault();var e=$("#input-code").val();$.ajax({url:"/api/check-coupon/"+e,method:"GET",success:function(t){var e,a=JSON.parse(t),o=$(".total-payment-text").html(),n=$("#total_item_qty").val();if(console.log("res",t),!0==a.status){if(a.data?.msg!=="pass"){if(e=a.data?.coupon_type=="percentage"?a.data?.coupon_value=="100"?$("#total_item_price").val()-$("#total_item_price").val()*(a.data?.coupon_value/100):$("#total_item_price").val()-15e3-($("#total_item_price").val()-15e3)*(a.data?.coupon_value/100)+15e3:$("#total_item_price").val()-n*a.data?.coupon_value,console.log("available coupon:",a.data?.available_coupon),console.log("order qty:",n),a.data?.available_coupon<n){$(".coupon-warning .text-end").html("this coupon is only for "+a.data?.available_coupon+(a.data?.available_coupon>1?" items":" item")),$(".coupon-warning").removeClass("d-none");return}$(".total-payment-text").html("<del>"+o+"</del>"),$(".total-discount-text").html(new Intl.NumberFormat("en-US",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e)),$("#crypo_currency_value").html(e/15e3),$(".special-price").removeClass("d-none")}$.ajax({url:"/home/check_address",method:"GET",success:function(t){200==JSON.parse(t).status?$("#modalPurchaseConfirmation").modal("show"):$("#modalNoAddress").modal("show")}}),$(".coupon-warning").addClass("d-none")}else $(".coupon-warning").removeClass("d-none")}})}),$("#btn-cancel-payment").click(t=>{t.preventDefault(),$("#modalPurchaseConfirmation").modal("hide")}),$(".paymentMethod").change(t=>{var e;let a=$(".paymentMethod:checked").val();switch(a){case"BRIVA":e="BRI Virtual Account";break;case"BNIVA":e="BNI Virtual Account";break;case"PERMATAVA":e="Permata Virtual Account";break;case"MANDIRIVA":e="Mandiri Virtual Account";break;case"BCAVA":e="BCA Virtual Account";break;case"INDOMARET":e="Indomaret";break;case"ALFAMART":e="Alfamart";break;case"QRIS":e="QRIS";break;case"DOKUVA":e="DOKU Virtual Account";break;case"CC":e="Credit Card";break;case"USDT":e="Tether";break;case"KPG":e="Kepeng";break;default:e="-"}$(".summary-payment-method").html(e),"USDT"==a||"KPG"==a?($("#crypto-type").html(a),$(".usdt-row").css("display","flex")):$(".usdt-row").css("display","none")}),1==sessionStorage.getItem("badges")?($("#badges").removeClass("d-none"),$("#badges").addClass("d-inline")):($("#badges").removeClass("d-inline"),$("#badges").addClass("d-none"))});